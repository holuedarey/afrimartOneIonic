{"version":3,"sources":["src/app/recently-viewed/recently-viewed.page.html","src/app/recently-viewed/recently-viewed.module.ts","src/app/recently-viewed/recently-viewed.page.scss","src/app/recently-viewed/recently-viewed.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<app-header\\n  [title]=\\\"title\\\"\\n  [longSearch]=\\\"longSearch\\\"\\n  [showBackButton]=\\\"showBackButton\\\"\\n  [isLoading]=\\\"loading\\\"\\n  [showSearch]=\\\"showSearch\\\"\\n>\\n</app-header>\\n\\n<ion-content>\\n  <ion-content>\\n    <div *ngIf=\\\"recentlyViewedProducts.length>0\\\">\\n      <div>\\n        <section class=\\\"sectionProductItem\\\">\\n          <ion-grid class=\\\"zero\\\">\\n            <ion-row\\n              *ngFor=\\\"let prod of recentlyViewedProducts; let i=index;\\\"\\n              class=\\\"gridProductItemList\\\"\\n            >\\n              <ion-col size=\\\"3\\\" routerLink=\\\"/products/{{prod._id}}\\\">\\n                <app-aspect-ratio [ratio]=\\\"{w:1, h:1}\\\">\\n                  <app-image-shell\\n                    animation=\\\"gradient\\\"\\n                    [src]=\\\"prod?.gallery[0]\\\"\\n                    [alt]=\\\"'Product Image'\\\"\\n                  >\\n                  </app-image-shell>\\n                </app-aspect-ratio>\\n              </ion-col>\\n              <ion-col size=\\\"9\\\">\\n                <ion-row class=\\\"zero\\\">\\n                  <ion-col size=\\\"11\\\" class=\\\"zero\\\">\\n                    <app-text-shell\\n                      animation=\\\"gradient\\\"\\n                      [data]=\\\"prod?.storeData.name | titlecase\\\"\\n                      class=\\\"note_title10Sec\\\"\\n                    >\\n                    </app-text-shell>\\n                  </ion-col>\\n                  <ion-col size=\\\"1\\\" class=\\\"zero\\\">\\n                    <!-- <ion-icon\\n                      name=\\\"trash-outline\\\"\\n                      color=\\\"secondary\\\"\\n                      (click)=\\\"deleteWishlistItem(prod)\\\"\\n                    ></ion-icon> -->\\n                  </ion-col>\\n                </ion-row>\\n                <ion-row class=\\\"zero\\\">\\n                  <ion-col\\n                    size=\\\"11\\\"\\n                    class=\\\"zero\\\"\\n                    routerLink=\\\"/products/{{prod._id}}\\\"\\n                  >\\n                    <h3 style=\\\"margin-top: 0px;\\\">\\n                      <app-text-shell\\n                        animation=\\\"gradient\\\"\\n                        [data]=\\\"prod?.name\\\"\\n                        lines=\\\"3\\\"\\n                        class=\\\"note_title12Black\\\"\\n                      >\\n                      </app-text-shell>\\n                    </h3>\\n                  </ion-col>\\n                  <ion-col size=\\\"1\\\" class=\\\"zero\\\">\\n                    &nbsp;\\n                  </ion-col>\\n                </ion-row>\\n                <ion-row class=\\\"zero\\\">\\n                  <ion-col size=\\\"11\\\" class=\\\"zero\\\">\\n                    <app-text-shell\\n                      animation=\\\"gradient\\\"\\n                      [data]=\\\"prod?.price |currency:'â‚¦':'symbol':'1.2-2'\\\"\\n                    >\\n                    </app-text-shell>\\n                  </ion-col>\\n                  <ion-col size=\\\"1\\\" class=\\\"zero\\\">\\n                    &nbsp;\\n                  </ion-col>\\n                </ion-row>\\n                <ion-row class=\\\"zero\\\">\\n                  <ion-col size=\\\"6\\\" class=\\\"zero\\\">\\n                    &nbsp;\\n                  </ion-col>\\n                  <ion-col size=\\\"6\\\" style=\\\"text-align: right;\\\" class=\\\"zero\\\">\\n                    <ion-button\\n                      expand=\\\"full\\\"\\n                      size=\\\"small\\\"\\n                      color=\\\"secondary\\\"\\n                      (click)=\\\"addToCart(prod)\\\"\\n                      >ADD TO CART\\n                    </ion-button>\\n                  </ion-col>\\n                </ion-row>\\n              </ion-col>\\n            </ion-row>\\n          </ion-grid>\\n          <!-- <ion-grid *ngIf=\\\"recentlyViewedProducts.length>0\\\" class=\\\"grid\\\">\\n            <ion-row>\\n              <ion-col size=\\\"12\\\">\\n                <ion-button expand=\\\"block\\\" fill=\\\"clear\\\" color=\\\"primary\\\"\\n                  >CLEAR ALL</ion-button\\n                >\\n              </ion-col>\\n            </ion-row>\\n          </ion-grid> -->\\n        </section>\\n      </div>\\n    </div>\\n\\n    <div *ngIf=\\\"!recentlyViewedProducts\\\">\\n      <ion-grid class=\\\"grid\\\" class=\\\"t_center\\\" style=\\\"padding-top: 50px;\\\">\\n        <ion-row>\\n          <ion-col size=\\\"12\\\">\\n            <ion-icon size=\\\"large\\\" name=\\\"cart-sharp\\\" color=\\\"primary\\\"></ion-icon>\\n          </ion-col>\\n        </ion-row>\\n        <ion-row>\\n          <ion-col size=\\\"12\\\">\\n            <ion-text> No products in your recently viewed items</ion-text>\\n          </ion-col>\\n        </ion-row>\\n        <ion-row>\\n          <ion-col size=\\\"12\\\">\\n            <ion-button\\n              expand=\\\"block\\\"\\n              color=\\\"primary\\\"\\n              [routerLink]=\\\"['/app/home']\\\"\\n            >\\n              CLICK TO SHOP\\n            </ion-button>\\n          </ion-col>\\n        </ion-row>\\n      </ion-grid>\\n    </div>\\n  </ion-content></ion-content\\n>\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { IonicModule } from '@ionic/angular';\nimport { ShellModule } from '../shell/shell.module';\nimport { SharedComponentsModule } from '../sharedComponents/shared-components.module';\n\nimport { RecentlyViewedPage } from './recently-viewed.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        component: RecentlyViewedPage\n      }\n    ]),\n    ShellModule,\n    SharedComponentsModule\n  ],\n  declarations: [RecentlyViewedPage]\n})\nexport class RecentlyViewedPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3JlY2VudGx5LXZpZXdlZC9yZWNlbnRseS12aWV3ZWQucGFnZS5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\nimport { Router, NavigationExtras } from '@angular/router';\nimport { NativeStorage } from '@ionic-native/native-storage/ngx';\nimport { ToastController } from '@ionic/angular';\nimport { OrderService } from 'src/app/core/http-services/order.service';\nimport {\n  ProductListModel,\n  CartItems,\n} from 'src/app/shared/models/product.model';\nimport { ProductService } from 'src/app/core/http-services/product.service';\nimport { AuthenticationService } from 'src/app/core/authentication/authentication.service';\n\n@Component({\n  selector: 'app-recently-viewed',\n  templateUrl: './recently-viewed.page.html',\n  styleUrls: ['./recently-viewed.page.scss'],\n})\nexport class RecentlyViewedPage implements OnInit {\n  ///Inputs\n  title: string = 'Recently Viewed';\n  longSearch: boolean = false;\n  showBackButton: boolean = true;\n  loading: boolean = false;\n  showSearch: boolean = true;\n  ////////////////////\n  products: CartItems[];\n  recentlyViewedProducts: ProductListModel[] = [];\n  currentUser: any;\n\n  constructor(\n    public router: Router,\n    private toastController: ToastController,\n    private nativeStorage: NativeStorage,\n    private orderService: OrderService,\n    private prodService: ProductService,\n    private authService: AuthenticationService\n  ) {}\n\n  ngOnInit() {\n    this.nativeStorage.getItem('currentUser').then((x) => {\n      this.currentUser = x;\n      this.loading=true;\n    this.recentlyViewedProducts = this.prodService.getLocalRecentlyViewedProducts()\n      ? this.prodService.getLocalRecentlyViewedProducts()\n      : [];\n      this.loading=false;\n      }\n      );\n  }\n  async presentToast(\n    header: string,\n    msg: string,\n    duration: number,\n    color: string\n  ) {\n    const toast = await this.toastController.create({\n      header: header,\n      position: 'bottom',\n      message: msg,\n      duration: duration,\n      // cssClass: 'custom-toast-class',\n      color: color,\n    });\n    toast.present();\n  }\n  getWishListItems() {\n    this.orderService.getWishlist(this.currentUser.token).subscribe(\n      (data) => {\n        if (!data.error) {\n          this.products = data.data;\n          // console.log('Wishlist: ' + JSON.stringify(this.products));\n        }\n      },\n      (err) => {\n        console.error(err);\n      }\n    );\n  }\n  addToCart(prod: ProductListModel) {\n    prod['productId'] = prod._id;\n    // console.log('addToCart: ' + JSON.stringify(prod));\n    this.nativeStorage.getItem('currentUser').then(\n      (data) => {\n        if (data) {\n          this.orderService.addToCart(this.currentUser.token, prod).subscribe(\n            (data) => {\n              // console.log('addToCart Success: ' + JSON.stringify(data));\n              this.prodService.getNumberofItemsInCart(data.data);\n              this.presentToast(\n                'GREAT!',\n                'Product successfully added to your cart ',\n                2000,\n                'success'\n              );\n              // this.toastr.success(\"Item successfuly added to cart\");\n            },\n            (err) => {\n              this.presentToast(\n                'OOPS!',\n                'An error occurred, Please try again later ',\n                2000,\n                'error'\n              );\n            }\n          );\n        } else {\n          // this.orderService.addToLocalCart(prod, 1);\n          // this.prodService.getNumberofItemsInCart(\n          //   this.orderService.getLocalCartItems().data\n          // );\n        }\n      },\n      (err) => {\n        console.log('addToCart Error: ' + err);\n      }\n    );\n  }\n  addToWishlist(prod) {\n    if (this.checkIfProdInWishList(prod)) {\n      this.removeFromWishlist(prod);\n    } else {\n      this.loading = true;\n      this.orderService\n        .addToWishlist(this.currentUser.token, {\n          productId: prod.productId,\n          quantity: 1,\n        })\n        .subscribe(\n          (data) => {\n            this.loading = false;\n          },\n          (err) => {\n            this.loading = false;\n            console.error(err);\n          }\n        );\n    }\n  }\n  removeFromWishlist(prod) {\n    this.loading = true;\n\n    this.orderService\n      .removeFromWishlist(this.currentUser.token, prod.productId)\n      .subscribe(\n        (data) => {\n          this.loading = false;\n          if (!data.error) {\n            const index = this.products.findIndex((x) => x._id == prod._id);\n            this.products.splice(index, 1);\n          }\n        },\n        (err) => {\n          this.loading = false;\n          console.error(err);\n        }\n      );\n  }\n  checkIfProdInWishList(prod): boolean {\n    return this.orderService.checkIfProdInWishList(prod.productId);\n  }\n}\n"],"sourceRoot":"webpack:///","file":"recently-viewed-recently-viewed-module-es5.js"}