{"version":3,"sources":["./src/app/recently-viewed/recently-viewed.page.html","./src/app/recently-viewed/recently-viewed.module.ts","./src/app/recently-viewed/recently-viewed.page.scss","./src/app/recently-viewed/recently-viewed.page.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,6fAA8b,aAAa,2HAA2H,UAAU,kDAAkD,SAAS,+tCAA+tC,UAAU,yEAAyE,ibAAib,2eAA2e,uLAAuL,gGAAgG,47BAA47B,qtB;;;;;;;;;;;;;;;;;;;;;;;;ACAlhI;AACM;AACF;AACE;AACF;AACO;AACkC;AAE1B;AAkB5D,IAAa,wBAAwB,GAArC,MAAa,wBAAwB;CAAG;AAA3B,wBAAwB;IAhBpC,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,4DAAY,CAAC,QAAQ,CAAC;gBACpB;oBACE,IAAI,EAAE,EAAE;oBACR,SAAS,EAAE,wEAAkB;iBAC9B;aACF,CAAC;YACF,+DAAW;YACX,iGAAsB;SACvB;QACD,YAAY,EAAE,CAAC,wEAAkB,CAAC;KACnC,CAAC;GACW,wBAAwB,CAAG;AAAH;;;;;;;;;;;;;AC1BrC;AAAe,6GAA8C,+J;;;;;;;;;;;;;;;;;;;;;;;ACAX;AACS;AACM;AAChB;AACuB;AAKI;AACe;AAO3F,IAAa,kBAAkB,GAA/B,MAAa,kBAAkB;IAY7B,YACS,MAAc,EACb,eAAgC,EAChC,aAA4B,EAC5B,YAA0B,EAC1B,WAA2B,EAC3B,WAAkC;QALnC,WAAM,GAAN,MAAM,CAAQ;QACb,oBAAe,GAAf,eAAe,CAAiB;QAChC,kBAAa,GAAb,aAAa,CAAe;QAC5B,iBAAY,GAAZ,YAAY,CAAc;QAC1B,gBAAW,GAAX,WAAW,CAAgB;QAC3B,gBAAW,GAAX,WAAW,CAAuB;QAjB5C,SAAS;QACT,UAAK,GAAW,iBAAiB,CAAC;QAClC,eAAU,GAAY,KAAK,CAAC;QAC5B,mBAAc,GAAY,IAAI,CAAC;QAC/B,YAAO,GAAY,KAAK,CAAC;QACzB,eAAU,GAAY,IAAI,CAAC;QAG3B,2BAAsB,GAAuB,EAAE,CAAC;IAU7C,CAAC;IAEJ,QAAQ;QACN,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE;YACnD,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;YACrB,IAAI,CAAC,OAAO,GAAC,IAAI,CAAC;YACpB,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,WAAW,CAAC,8BAA8B,EAAE;gBAC7E,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,8BAA8B,EAAE;gBACnD,CAAC,CAAC,EAAE,CAAC;YACL,IAAI,CAAC,OAAO,GAAC,KAAK,CAAC;QACnB,CAAC,CACA,CAAC;IACN,CAAC;IACK,YAAY,CAChB,MAAc,EACd,GAAW,EACX,QAAgB,EAChB,KAAa;;YAEb,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;gBAC9C,MAAM,EAAE,MAAM;gBACd,QAAQ,EAAE,QAAQ;gBAClB,OAAO,EAAE,GAAG;gBACZ,QAAQ,EAAE,QAAQ;gBAClB,kCAAkC;gBAClC,KAAK,EAAE,KAAK;aACb,CAAC,CAAC;YACH,KAAK,CAAC,OAAO,EAAE,CAAC;QAClB,CAAC;KAAA;IACD,gBAAgB;QACd,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,SAAS,CAC7D,CAAC,IAAI,EAAE,EAAE;YACP,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;gBACf,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC;gBAC1B,6DAA6D;aAC9D;QACH,CAAC,EACD,CAAC,GAAG,EAAE,EAAE;YACN,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACrB,CAAC,CACF,CAAC;IACJ,CAAC;IACD,SAAS,CAAC,IAAsB;QAC9B,IAAI,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC;QAC7B,qDAAqD;QACrD,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,IAAI,CAC5C,CAAC,IAAI,EAAE,EAAE;YACP,IAAI,IAAI,EAAE;gBACR,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,SAAS,CACjE,CAAC,IAAI,EAAE,EAAE;oBACP,6DAA6D;oBAC7D,IAAI,CAAC,WAAW,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACnD,IAAI,CAAC,YAAY,CACf,QAAQ,EACR,0CAA0C,EAC1C,IAAI,EACJ,SAAS,CACV,CAAC;oBACF,yDAAyD;gBAC3D,CAAC,EACD,CAAC,GAAG,EAAE,EAAE;oBACN,IAAI,CAAC,YAAY,CACf,OAAO,EACP,4CAA4C,EAC5C,IAAI,EACJ,OAAO,CACR,CAAC;gBACJ,CAAC,CACF,CAAC;aACH;iBAAM;gBACL,6CAA6C;gBAC7C,2CAA2C;gBAC3C,+CAA+C;gBAC/C,KAAK;aACN;QACH,CAAC,EACD,CAAC,GAAG,EAAE,EAAE;YACN,OAAO,CAAC,GAAG,CAAC,mBAAmB,GAAG,GAAG,CAAC,CAAC;QACzC,CAAC,CACF,CAAC;IACJ,CAAC;IACD,aAAa,CAAC,IAAI;QAChB,IAAI,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,EAAE;YACpC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;SAC/B;aAAM;YACL,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YACpB,IAAI,CAAC,YAAY;iBACd,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE;gBACrC,SAAS,EAAE,IAAI,CAAC,SAAS;gBACzB,QAAQ,EAAE,CAAC;aACZ,CAAC;iBACD,SAAS,CACR,CAAC,IAAI,EAAE,EAAE;gBACP,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACvB,CAAC,EACD,CAAC,GAAG,EAAE,EAAE;gBACN,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;gBACrB,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACrB,CAAC,CACF,CAAC;SACL;IACH,CAAC;IACD,kBAAkB,CAAC,IAAI;QACrB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QAEpB,IAAI,CAAC,YAAY;aACd,kBAAkB,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC;aAC1D,SAAS,CACR,CAAC,IAAI,EAAE,EAAE;YACP,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;gBACf,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC;gBAChE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;aAChC;QACH,CAAC,EACD,CAAC,GAAG,EAAE,EAAE;YACN,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACrB,CAAC,CACF,CAAC;IACN,CAAC;IACD,qBAAqB,CAAC,IAAI;QACxB,OAAO,IAAI,CAAC,YAAY,CAAC,qBAAqB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IACjE,CAAC;CACF;;YAlIkB,sDAAM;YACI,8DAAe;YACjB,8EAAa;YACd,qFAAY;YACb,yFAAc;YACd,wGAAqB;;AAlBjC,kBAAkB;IAL9B,+DAAS,CAAC;QACT,QAAQ,EAAE,qBAAqB;QAC/B,uOAA0C;;KAE3C,CAAC;2EAciB,sDAAM;QACI,8DAAe;QACjB,8EAAa;QACd,qFAAY;QACb,yFAAc;QACd,wGAAqB;GAlBjC,kBAAkB,CA+I9B;AA/I8B","file":"recently-viewed-recently-viewed-module-es2015.js","sourcesContent":["export default \"<app-header\\n  [title]=\\\"title\\\"\\n  [longSearch]=\\\"longSearch\\\"\\n  [showBackButton]=\\\"showBackButton\\\"\\n  [isLoading]=\\\"loading\\\"\\n  [showSearch]=\\\"showSearch\\\"\\n>\\n</app-header>\\n\\n<ion-content>\\n  <ion-content>\\n    <div *ngIf=\\\"recentlyViewedProducts.length>0\\\">\\n      <div>\\n        <section class=\\\"sectionProductItem\\\">\\n          <ion-grid class=\\\"zero\\\">\\n            <ion-row\\n              *ngFor=\\\"let prod of recentlyViewedProducts; let i=index;\\\"\\n              class=\\\"gridProductItemList\\\"\\n            >\\n              <ion-col size=\\\"3\\\" routerLink=\\\"/products/{{prod._id}}\\\">\\n                <app-aspect-ratio [ratio]=\\\"{w:1, h:1}\\\">\\n                  <app-image-shell\\n                    animation=\\\"gradient\\\"\\n                    [src]=\\\"prod?.gallery[0]\\\"\\n                    [alt]=\\\"'Product Image'\\\"\\n                  >\\n                  </app-image-shell>\\n                </app-aspect-ratio>\\n              </ion-col>\\n              <ion-col size=\\\"9\\\">\\n                <ion-row class=\\\"zero\\\">\\n                  <ion-col size=\\\"11\\\" class=\\\"zero\\\">\\n                    <app-text-shell\\n                      animation=\\\"gradient\\\"\\n                      [data]=\\\"prod?.storeData.name | titlecase\\\"\\n                      class=\\\"note_title10Sec\\\"\\n                    >\\n                    </app-text-shell>\\n                  </ion-col>\\n                  <ion-col size=\\\"1\\\" class=\\\"zero\\\">\\n                    <!-- <ion-icon\\n                      name=\\\"trash-outline\\\"\\n                      color=\\\"secondary\\\"\\n                      (click)=\\\"deleteWishlistItem(prod)\\\"\\n                    ></ion-icon> -->\\n                  </ion-col>\\n                </ion-row>\\n                <ion-row class=\\\"zero\\\">\\n                  <ion-col\\n                    size=\\\"11\\\"\\n                    class=\\\"zero\\\"\\n                    routerLink=\\\"/products/{{prod._id}}\\\"\\n                  >\\n                    <h3 style=\\\"margin-top: 0px;\\\">\\n                      <app-text-shell\\n                        animation=\\\"gradient\\\"\\n                        [data]=\\\"prod?.name\\\"\\n                        lines=\\\"3\\\"\\n                        class=\\\"note_title12Black\\\"\\n                      >\\n                      </app-text-shell>\\n                    </h3>\\n                  </ion-col>\\n                  <ion-col size=\\\"1\\\" class=\\\"zero\\\">\\n                    &nbsp;\\n                  </ion-col>\\n                </ion-row>\\n                <ion-row class=\\\"zero\\\">\\n                  <ion-col size=\\\"11\\\" class=\\\"zero\\\">\\n                    <app-text-shell\\n                      animation=\\\"gradient\\\"\\n                      [data]=\\\"prod?.price |currency:'â‚¦':'symbol':'1.2-2'\\\"\\n                    >\\n                    </app-text-shell>\\n                  </ion-col>\\n                  <ion-col size=\\\"1\\\" class=\\\"zero\\\">\\n                    &nbsp;\\n                  </ion-col>\\n                </ion-row>\\n                <ion-row class=\\\"zero\\\">\\n                  <ion-col size=\\\"6\\\" class=\\\"zero\\\">\\n                    &nbsp;\\n                  </ion-col>\\n                  <ion-col size=\\\"6\\\" style=\\\"text-align: right;\\\" class=\\\"zero\\\">\\n                    <ion-button\\n                      expand=\\\"full\\\"\\n                      size=\\\"small\\\"\\n                      color=\\\"secondary\\\"\\n                      (click)=\\\"addToCart(prod)\\\"\\n                      >ADD TO CART\\n                    </ion-button>\\n                  </ion-col>\\n                </ion-row>\\n              </ion-col>\\n            </ion-row>\\n          </ion-grid>\\n          <!-- <ion-grid *ngIf=\\\"recentlyViewedProducts.length>0\\\" class=\\\"grid\\\">\\n            <ion-row>\\n              <ion-col size=\\\"12\\\">\\n                <ion-button expand=\\\"block\\\" fill=\\\"clear\\\" color=\\\"primary\\\"\\n                  >CLEAR ALL</ion-button\\n                >\\n              </ion-col>\\n            </ion-row>\\n          </ion-grid> -->\\n        </section>\\n      </div>\\n    </div>\\n\\n    <div *ngIf=\\\"!recentlyViewedProducts\\\">\\n      <ion-grid class=\\\"grid\\\" class=\\\"t_center\\\" style=\\\"padding-top: 50px;\\\">\\n        <ion-row>\\n          <ion-col size=\\\"12\\\">\\n            <ion-icon size=\\\"large\\\" name=\\\"cart-sharp\\\" color=\\\"primary\\\"></ion-icon>\\n          </ion-col>\\n        </ion-row>\\n        <ion-row>\\n          <ion-col size=\\\"12\\\">\\n            <ion-text> No products in your recently viewed items</ion-text>\\n          </ion-col>\\n        </ion-row>\\n        <ion-row>\\n          <ion-col size=\\\"12\\\">\\n            <ion-button\\n              expand=\\\"block\\\"\\n              color=\\\"primary\\\"\\n              [routerLink]=\\\"['/app/home']\\\"\\n            >\\n              CLICK TO SHOP\\n            </ion-button>\\n          </ion-col>\\n        </ion-row>\\n      </ion-grid>\\n    </div>\\n  </ion-content></ion-content\\n>\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { IonicModule } from '@ionic/angular';\nimport { ShellModule } from '../shell/shell.module';\nimport { SharedComponentsModule } from '../sharedComponents/shared-components.module';\n\nimport { RecentlyViewedPage } from './recently-viewed.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        component: RecentlyViewedPage\n      }\n    ]),\n    ShellModule,\n    SharedComponentsModule\n  ],\n  declarations: [RecentlyViewedPage]\n})\nexport class RecentlyViewedPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3JlY2VudGx5LXZpZXdlZC9yZWNlbnRseS12aWV3ZWQucGFnZS5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\nimport { Router, NavigationExtras } from '@angular/router';\nimport { NativeStorage } from '@ionic-native/native-storage/ngx';\nimport { ToastController } from '@ionic/angular';\nimport { OrderService } from 'src/app/core/http-services/order.service';\nimport {\n  ProductListModel,\n  CartItems,\n} from 'src/app/shared/models/product.model';\nimport { ProductService } from 'src/app/core/http-services/product.service';\nimport { AuthenticationService } from 'src/app/core/authentication/authentication.service';\n\n@Component({\n  selector: 'app-recently-viewed',\n  templateUrl: './recently-viewed.page.html',\n  styleUrls: ['./recently-viewed.page.scss'],\n})\nexport class RecentlyViewedPage implements OnInit {\n  ///Inputs\n  title: string = 'Recently Viewed';\n  longSearch: boolean = false;\n  showBackButton: boolean = true;\n  loading: boolean = false;\n  showSearch: boolean = true;\n  ////////////////////\n  products: CartItems[];\n  recentlyViewedProducts: ProductListModel[] = [];\n  currentUser: any;\n\n  constructor(\n    public router: Router,\n    private toastController: ToastController,\n    private nativeStorage: NativeStorage,\n    private orderService: OrderService,\n    private prodService: ProductService,\n    private authService: AuthenticationService\n  ) {}\n\n  ngOnInit() {\n    this.nativeStorage.getItem('currentUser').then((x) => {\n      this.currentUser = x;\n      this.loading=true;\n    this.recentlyViewedProducts = this.prodService.getLocalRecentlyViewedProducts()\n      ? this.prodService.getLocalRecentlyViewedProducts()\n      : [];\n      this.loading=false;\n      }\n      );\n  }\n  async presentToast(\n    header: string,\n    msg: string,\n    duration: number,\n    color: string\n  ) {\n    const toast = await this.toastController.create({\n      header: header,\n      position: 'bottom',\n      message: msg,\n      duration: duration,\n      // cssClass: 'custom-toast-class',\n      color: color,\n    });\n    toast.present();\n  }\n  getWishListItems() {\n    this.orderService.getWishlist(this.currentUser.token).subscribe(\n      (data) => {\n        if (!data.error) {\n          this.products = data.data;\n          // console.log('Wishlist: ' + JSON.stringify(this.products));\n        }\n      },\n      (err) => {\n        console.error(err);\n      }\n    );\n  }\n  addToCart(prod: ProductListModel) {\n    prod['productId'] = prod._id;\n    // console.log('addToCart: ' + JSON.stringify(prod));\n    this.nativeStorage.getItem('currentUser').then(\n      (data) => {\n        if (data) {\n          this.orderService.addToCart(this.currentUser.token, prod).subscribe(\n            (data) => {\n              // console.log('addToCart Success: ' + JSON.stringify(data));\n              this.prodService.getNumberofItemsInCart(data.data);\n              this.presentToast(\n                'GREAT!',\n                'Product successfully added to your cart ',\n                2000,\n                'success'\n              );\n              // this.toastr.success(\"Item successfuly added to cart\");\n            },\n            (err) => {\n              this.presentToast(\n                'OOPS!',\n                'An error occurred, Please try again later ',\n                2000,\n                'error'\n              );\n            }\n          );\n        } else {\n          // this.orderService.addToLocalCart(prod, 1);\n          // this.prodService.getNumberofItemsInCart(\n          //   this.orderService.getLocalCartItems().data\n          // );\n        }\n      },\n      (err) => {\n        console.log('addToCart Error: ' + err);\n      }\n    );\n  }\n  addToWishlist(prod) {\n    if (this.checkIfProdInWishList(prod)) {\n      this.removeFromWishlist(prod);\n    } else {\n      this.loading = true;\n      this.orderService\n        .addToWishlist(this.currentUser.token, {\n          productId: prod.productId,\n          quantity: 1,\n        })\n        .subscribe(\n          (data) => {\n            this.loading = false;\n          },\n          (err) => {\n            this.loading = false;\n            console.error(err);\n          }\n        );\n    }\n  }\n  removeFromWishlist(prod) {\n    this.loading = true;\n\n    this.orderService\n      .removeFromWishlist(this.currentUser.token, prod.productId)\n      .subscribe(\n        (data) => {\n          this.loading = false;\n          if (!data.error) {\n            const index = this.products.findIndex((x) => x._id == prod._id);\n            this.products.splice(index, 1);\n          }\n        },\n        (err) => {\n          this.loading = false;\n          console.error(err);\n        }\n      );\n  }\n  checkIfProdInWishList(prod): boolean {\n    return this.orderService.checkIfProdInWishList(prod.productId);\n  }\n}\n"],"sourceRoot":"webpack:///"}